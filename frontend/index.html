
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SMS Spam Detection</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
  <div class="nav-logo">ðŸ“© SMS Spam Detection</div>
  <ul class="nav-links">
    <li><a href="#home" class="active">Home</a></li>
    <li><a href="#predict">Predict</a></li>
    <li><a href="#about">About</a></li>
  </ul>
</nav>

<!-- Hero Section -->
<section id="home" class="hero">
  <div class="hero-content">
    <h1>Protect Yourself from Spam Messages</h1>
    <p>AI-powered system to detect spam SMS instantly with high accuracy.</p>
    <a href="#predict" class="btn">Try Now</a>
  </div>
</section>

<!-- Predict Section -->
<section id="predict" class="section">
  <h1 class="section-title">ðŸ“© SMS Spam Detection</h1>
  <div class="card">
    <textarea id="message" placeholder="Enter SMS message here..."></textarea>
    <button onclick="checkSpam()">Check</button>
    <div id="result"></div>
  </div>

  <div class="card" style="margin-top:30px;">
    <h2>ðŸ“Š Model Accuracy</h2>
    <canvas id="accuracyChart"></canvas>
  </div>
</section>

<!-- About Section -->
<section id="about" class="section about-section">
  <h2>Our Mission</h2>
  <p>To protect individuals and businesses from unwanted and harmful SMS messages using AI-powered spam detection.</p>

  <h2>How It Works</h2>
  <p>We use a Naive Bayes model trained on real SMS datasets. Messages are classified instantly.</p>

  <h2>Why Choose Us</h2>
  <div class="feature-cards">
    <div class="card"><h3>High Accuracy</h3><p>Trained with trusted datasets for precise results.</p></div>
    <div class="card"><h3>Fast Response</h3><p>Instant detection without delay.</p></div>
    <div class="card"><h3>Easy to Use</h3><p>Clean interface makes spam detection simple for everyone.</p></div>
  </div>
</section>

<!-- Footer -->
<footer>
  <p>Â© 2025 SMS Spam Detection. All rights reserved.</p>
</footer>

<script>
let accuracyChart = null;
let lastConfidence = 0;

async function fetchMetrics() {
  try {
    const response = await fetch("https://shell-training-edunet-07.onrender.com/metrics");
    const data = await response.json();

    const ctx = document.getElementById('accuracyChart').getContext('2d');
    if (accuracyChart) accuracyChart.destroy();

    accuracyChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Train Accuracy', 'Test Accuracy', 'Last Prediction Confidence'],
        datasets: [{
          data: [
            (data.train_accuracy || 0) * 100,
            (data.test_accuracy || 0) * 100,
            lastConfidence
          ],
          backgroundColor: ['#2575fc', '#ac81db', '#f7b500']
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' },
          title: { display: true, text: 'Model Accuracy & Last Prediction Confidence (%)' }
        }
      }
    });
  } catch (err) {
    console.error("Error fetching metrics:", err);
  }
}

async function checkSpam() {
  const msg = document.getElementById("message").value;
  if (!msg.trim()) { alert("Please enter a message!"); return; }

  try {
    const response = await fetch("https://shell-training-edunet-07.onrender.com/predict", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ message: msg })
});

    const data = await response.json();
    if (data.error) { document.getElementById("result").innerText = "Error: " + data.error; return; }

    lastConfidence = data.confidence * 100;
    document.getElementById("result").innerText = `Prediction: ${data.prediction.toUpperCase()} (Confidence: ${lastConfidence.toFixed(2)}%)`;

    fetchMetrics();
  } catch (err) {
    document.getElementById("result").innerText = "Error connecting to backend";
  }
}
</script>

</body>
</html>
